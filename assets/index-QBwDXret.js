(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();const Pt="ABCDEFGHJKMNPQRSTUVWXYZ23456789";function Wt(o=6){let t="";const e=new Uint8Array(o);crypto.getRandomValues(e);for(let n=0;n<o;n++)t+=Pt[e[n]%Pt.length];return t}class ${constructor(){this.code=Wt(),this.presenterId=crypto.randomUUID(),this.createdAt=Date.now(),this.polls=[],this.participants=[],this.activePollId=null}addParticipant(t,e){this.participants.some(n=>n.id===t)||this.participants.push({id:t,name:e,joinedAt:Date.now()})}removeParticipant(t){this.participants=this.participants.filter(e=>e.id!==t)}getParticipantCount(){return this.participants.length}addPoll(t){const e={...t,id:crypto.randomUUID()};return this.polls.push(e),e}setActivePoll(t){this.activePollId=t}getActivePoll(){return this.polls.find(t=>t.id===this.activePollId)||null}toJSON(){return{code:this.code,presenterId:this.presenterId,createdAt:this.createdAt,polls:this.polls,participants:this.participants,activePollId:this.activePollId}}static fromJSON(t){const e=new $;return e.code=t.code,e.presenterId=t.presenterId,e.createdAt=t.createdAt,e.polls=t.polls||[],e.participants=t.participants||[],e.activePollId=t.activePollId||null,e}}function Kt(o,t){switch(o){case"multiple-choice":return new W(t);case"word-cloud":return new K(t);case"open-ended":return new Y(t);default:throw new Error(`Unknown poll type: ${o}`)}}class wt{constructor(t){this.id=crypto.randomUUID(),this.question=t.question,this.createdAt=Date.now()}}class W extends wt{constructor(t){super(t),this.type="multiple-choice",this.options=t.options||[],this.allowMultiple=t.allowMultiple||!1,this.votes=new Map}vote(t,e){for(const s of e)if(!this.options.includes(s))throw new Error(`Invalid option: ${s}`);const n=this.allowMultiple?e:[e[0]];this.votes.set(t,n)}getResults(){const t={};for(const e of this.options)t[e]=0;for(const e of this.votes.values())for(const n of e)t[n]++;return t}getTotalVotes(){let t=0;for(const e of this.votes.values())t+=e.length;return t}getPercentages(){const t=this.getResults(),e=this.getTotalVotes(),n={};for(const s of this.options)n[s]=e>0?Math.round(t[s]/e*100):0;return n}reset(){this.votes.clear()}toJSON(){return{id:this.id,type:this.type,question:this.question,options:this.options,allowMultiple:this.allowMultiple,votes:Object.fromEntries(this.votes),createdAt:this.createdAt}}static fromJSON(t){const e=new W({question:t.question,options:t.options,allowMultiple:t.allowMultiple});return e.id=t.id,e.createdAt=t.createdAt,e.votes=new Map(Object.entries(t.votes||{})),e}}class K extends wt{constructor(t){super(t),this.type="word-cloud",this.maxWords=t.maxWords||3,this.submissions=new Map}_normalizeWord(t){return t.toLowerCase().trim().replace(/[^a-zÃ¤Ã¶Ã¼ÃŸ0-9]/gi,"")}submit(t,e){const n=e.map(s=>this._normalizeWord(s)).filter(s=>s.length>0).slice(0,this.maxWords);this.submissions.set(t,n)}getWords(){const t=new Map;for(const e of this.submissions.values())for(const n of e)t.set(n,(t.get(n)||0)+1);return Array.from(t.entries()).map(([e,n])=>({text:e,count:n})).sort((e,n)=>n.count-e.count)}getWordsWithSizes(t=16,e=48){const n=this.getWords();if(n.length===0)return[];const s=Math.max(...n.map(a=>a.count)),i=Math.min(...n.map(a=>a.count)),r=s-i||1;return n.map(a=>({...a,size:t+(a.count-i)/r*(e-t)}))}toJSON(){return{id:this.id,type:this.type,question:this.question,maxWords:this.maxWords,submissions:Object.fromEntries(this.submissions),createdAt:this.createdAt}}static fromJSON(t){const e=new K({question:t.question,maxWords:t.maxWords});return e.id=t.id,e.createdAt=t.createdAt,e.submissions=new Map(Object.entries(t.submissions||{})),e}}class Y extends wt{constructor(t){super(t),this.type="open-ended",this.maxLength=t.maxLength||500,this.responses=[]}submit(t,e){const n=e.trim();if(!n)throw new Error("Response cannot be empty");const s=n.slice(0,this.maxLength);this.responses.push({id:crypto.randomUUID(),userId:t,text:s,timestamp:Date.now()})}getResponses(){return[...this.responses].sort((t,e)=>t.timestamp-e.timestamp)}getResponseCount(){return this.responses.length}toJSON(){return{id:this.id,type:this.type,question:this.question,maxLength:this.maxLength,responses:this.responses,createdAt:this.createdAt}}static fromJSON(t){const e=new Y({question:t.question,maxLength:t.maxLength});return e.id=t.id,e.createdAt=t.createdAt,e.responses=t.responses||[],e}}const _={JOIN:"join",LEAVE:"leave",VOTE:"vote",SUBMIT:"submit",SYNC_STATE:"sync-state",POLL_UPDATE:"poll-update",PARTICIPANT_UPDATE:"participant-update"};class Yt{constructor(){this._eventHandlers=new Map}on(t,e){return this._eventHandlers.has(t)||this._eventHandlers.set(t,[]),this._eventHandlers.get(t).push(e),this}off(t,e){if(!this._eventHandlers.has(t))return;const n=this._eventHandlers.get(t),s=n.indexOf(e);return s>-1&&n.splice(s,1),this}emit(t,e){if(this._eventHandlers.has(t))for(const n of this._eventHandlers.get(t))try{n(e)}catch(s){console.error("Event handler error:",s)}}}class St extends Yt{constructor(t={}){super(),this.peer=null,this.peerId=null,this.isHost=!1,this._connections=new Map,this._initialized=!1,this._PeerClass=t.PeerClass||(typeof Peer<"u"?Peer:null),this._sessionCode=null}sessionCodeToPeerId(t){return`mentimeter-pro-${t.toLowerCase()}`}async init(t=null){return this._initialized?this.peerId:new Promise((e,n)=>{try{this.peer=new this._PeerClass(t,{debug:0}),this.peer.on("open",s=>{this.peerId=s,this._initialized=!0,this.emit("ready",s),e(s)}),this.peer.on("error",s=>{this.emit("error",s),n(s)}),this.peer.on("connection",s=>{this._handleConnection(s)})}catch(s){n(s)}})}host(t){return this._sessionCode=t,this.isHost=!0,t}join(t){this.isHost=!1;const e=this.peer.connect(t);return this._connections.set(t,e),e.on("open",()=>{this.emit("joined",t)}),e.on("data",n=>{this.emit("message",{...n,from:t})}),e.on("close",()=>{this._connections.delete(t),this.emit("disconnected")}),e}_handleConnection(t){const e=t.peer;t.on("open",()=>{this._connections.set(e,t),this.emit("peer-connect",e)}),t.on("data",n=>{this.emit("message",{...n,from:e})}),t.on("close",()=>{this._connections.delete(e),this.emit("peer-disconnect",e)}),t.on("error",n=>{console.error("Connection error:",n),this.emit("peer-error",{peerId:e,error:n})})}getConnectedPeers(){return Array.from(this._connections.keys())}broadcast(t){for(const e of this._connections.values())try{e.send(t)}catch(n){console.error("Broadcast error:",n)}}sendToHost(t){const e=this._connections.values().next().value;e&&e.send(t)}sendTo(t,e){const n=this._connections.get(t);n&&n.send(e)}destroy(){for(const t of this._connections.values())try{t.close()}catch{}this._connections.clear(),this.peer&&this.peer.destroy(),this._initialized=!1,this.peerId=null}}class jt{constructor(){this.session=null,this.p2p=null,this.mode=null,this.participantName="",this.connectionStatus="disconnected",this._listeners=new Map,this._pollInstances=new Map}on(t,e){this._listeners.has(t)||this._listeners.set(t,[]),this._listeners.get(t).push(e)}_emit(t,e){(this._listeners.get(t)||[]).forEach(s=>s(e))}async startSession(){this.session=new $,this.mode="presenter",this.p2p=new St;const t=this.p2p.sessionCodeToPeerId(this.session.code);try{await this.p2p.init(t),this.p2p.host(this.session.code),this.connectionStatus="connected",this._setupPresenterHandlers(),this._emit("session-started",this.session),this._emit("status-change",this.connectionStatus)}catch(e){console.error("Failed to start session:",e),this.connectionStatus="error",this._emit("error",e)}return this.session}async joinSession(t,e){this.participantName=e,this.mode="participant",this.connectionStatus="connecting",this._emit("status-change",this.connectionStatus),this.p2p=new St;try{await this.p2p.init();const n=this.p2p.sessionCodeToPeerId(t.toUpperCase());this.p2p.join(n),this._setupParticipantHandlers(),this.p2p.on("joined",()=>{this.connectionStatus="connected",this._emit("status-change",this.connectionStatus),this.p2p.sendToHost({type:_.JOIN,name:this.participantName})})}catch(n){console.error("Failed to join session:",n),this.connectionStatus="error",this._emit("error",n)}}_setupPresenterHandlers(){this.p2p.on("peer-connect",t=>{console.log("Peer connected:",t)}),this.p2p.on("peer-disconnect",t=>{this.session.removeParticipant(t),this._emit("participants-update",this.session.participants),this._broadcastState()}),this.p2p.on("message",t=>{this._handlePresenterMessage(t)})}_handlePresenterMessage(t){switch(t.type){case _.JOIN:this.session.addParticipant(t.from,t.name),this._emit("participants-update",this.session.participants),this.p2p.sendTo(t.from,{type:_.SYNC_STATE,session:this._getSessionState()});break;case _.VOTE:this._handleVote(t.from,t.pollId,t.data);break;case _.SUBMIT:this._handleSubmit(t.from,t.pollId,t.data);break}}_handleVote(t,e,n){const s=this._pollInstances.get(e);if(!(!s||!(s instanceof W)))try{s.vote(t,n.selections),this._emit("poll-update",{pollId:e,poll:s}),this._broadcastPollUpdate(e)}catch(i){console.error("Vote error:",i)}}_handleSubmit(t,e,n){const s=this._pollInstances.get(e);if(s)try{s instanceof K?s.submit(t,n.words):s instanceof Y&&s.submit(t,n.text),this._emit("poll-update",{pollId:e,poll:s}),this._broadcastPollUpdate(e)}catch(i){console.error("Submit error:",i)}}_setupParticipantHandlers(){this.p2p.on("message",t=>{this._handleParticipantMessage(t)}),this.p2p.on("disconnected",()=>{this.connectionStatus="disconnected",this._emit("status-change",this.connectionStatus)})}_handleParticipantMessage(t){switch(t.type){case _.SYNC_STATE:this._restoreSessionState(t.session),this._emit("session-sync",this.session);break;case _.POLL_UPDATE:this._updatePollFromData(t.pollId,t.pollData),this._emit("poll-update",{pollId:t.pollId});break;case _.PARTICIPANT_UPDATE:this.session&&(this.session.participants=t.participants,this._emit("participants-update",t.participants));break}}createPoll(t,e){const n=Kt(t,e);return this._pollInstances.set(n.id,n),this.session.addPoll({id:n.id,type:t,question:e.question,options:e.options}),this._emit("polls-update",this.session.polls),n}activatePoll(t){this.session.setActivePoll(t),this._emit("active-poll-change",t),this._broadcastState()}submitVote(t,e){this.p2p.sendToHost({type:_.VOTE,pollId:t,data:{selections:e}})}submitWords(t,e){this.p2p.sendToHost({type:_.SUBMIT,pollId:t,data:{words:e}})}submitText(t,e){this.p2p.sendToHost({type:_.SUBMIT,pollId:t,data:{text:e}})}getPoll(t){return this._pollInstances.get(t)}_getSessionState(){const t={};for(const[e,n]of this._pollInstances)t[e]=n.toJSON();return{code:this.session.code,activePollId:this.session.activePollId,participants:this.session.participants,polls:t}}_restoreSessionState(t){this.session=new $,this.session.code=t.code,this.session.activePollId=t.activePollId,this.session.participants=t.participants||[];for(const[e,n]of Object.entries(t.polls||{})){let s;switch(n.type){case"multiple-choice":s=W.fromJSON(n);break;case"word-cloud":s=K.fromJSON(n);break;case"open-ended":s=Y.fromJSON(n);break}s&&(this._pollInstances.set(e,s),this.session.polls.push({id:s.id,type:n.type,question:s.question}))}}_updatePollFromData(t,e){const n=this._pollInstances.get(t);n&&e.results&&(n._latestResults=e.results)}_broadcastState(){this.p2p.broadcast({type:_.SYNC_STATE,session:this._getSessionState()})}_broadcastPollUpdate(t){const e=this._pollInstances.get(t);e&&this.p2p.broadcast({type:_.POLL_UPDATE,pollId:t,pollData:e.toJSON()})}destroy(){this.p2p&&this.p2p.destroy(),this.session=null,this._pollInstances.clear()}}function l(o,t={},...e){const n=document.createElement(o);for(const[s,i]of Object.entries(t))if(s==="className")n.className=i;else if(s==="style"&&typeof i=="object")Object.assign(n.style,i);else if(s.startsWith("on")&&typeof i=="function"){const r=s.slice(2).toLowerCase();n.addEventListener(r,i)}else s==="html"?n.innerHTML=i:n.setAttribute(s,i);for(const s of e.flat())s!=null&&(typeof s=="string"||typeof s=="number"?n.appendChild(document.createTextNode(String(s))):s instanceof Node&&n.appendChild(s));return n}function F(o,t){o.innerHTML="",o.appendChild(t)}function Gt(o){return document.querySelector(o)}var G={},Qt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},_t={},v={};let yt;const Zt=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];v.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};v.getSymbolTotalCodewords=function(t){return Zt[t]};v.getBCHDigit=function(o){let t=0;for(;o!==0;)t++,o>>>=1;return t};v.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');yt=t};v.isKanjiModeEnabled=function(){return typeof yt<"u"};v.toSJIS=function(t){return yt(t)};var nt={};(function(o){o.L={bit:1},o.M={bit:0},o.Q={bit:3},o.H={bit:2};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return o.L;case"m":case"medium":return o.M;case"q":case"quartile":return o.Q;case"h":case"high":return o.H;default:throw new Error("Unknown EC Level: "+e)}}o.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},o.from=function(n,s){if(o.isValid(n))return n;try{return t(n)}catch{return s}}})(nt);function vt(){this.buffer=[],this.length=0}vt.prototype={get:function(o){const t=Math.floor(o/8);return(this.buffer[t]>>>7-o%8&1)===1},put:function(o,t){for(let e=0;e<t;e++)this.putBit((o>>>t-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(o){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),o&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Xt=vt;function Q(o){if(!o||o<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=o,this.data=new Uint8Array(o*o),this.reservedBit=new Uint8Array(o*o)}Q.prototype.set=function(o,t,e,n){const s=o*this.size+t;this.data[s]=e,n&&(this.reservedBit[s]=!0)};Q.prototype.get=function(o,t){return this.data[o*this.size+t]};Q.prototype.xor=function(o,t,e){this.data[o*this.size+t]^=e};Q.prototype.isReserved=function(o,t){return this.reservedBit[o*this.size+t]};var $t=Q,Bt={};(function(o){const t=v.getSymbolSize;o.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,i=t(n),r=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let c=1;c<s-1;c++)a[c]=a[c-1]-r;return a.push(6),a.reverse()},o.getPositions=function(n){const s=[],i=o.getRowColCoords(n),r=i.length;for(let a=0;a<r;a++)for(let c=0;c<r;c++)a===0&&c===0||a===0&&c===r-1||a===r-1&&c===0||s.push([i[a],i[c]]);return s}})(Bt);var Mt={};const te=v.getSymbolSize,At=7;Mt.getPositions=function(t){const e=te(t);return[[0,0],[e-At,0],[0,e-At]]};var Lt={};(function(o){o.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};o.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},o.from=function(s){return o.isValid(s)?parseInt(s,10):void 0},o.getPenaltyN1=function(s){const i=s.size;let r=0,a=0,c=0,d=null,u=null;for(let N=0;N<i;N++){a=c=0,d=u=null;for(let f=0;f<i;f++){let h=s.get(N,f);h===d?a++:(a>=5&&(r+=t.N1+(a-5)),d=h,a=1),h=s.get(f,N),h===u?c++:(c>=5&&(r+=t.N1+(c-5)),u=h,c=1)}a>=5&&(r+=t.N1+(a-5)),c>=5&&(r+=t.N1+(c-5))}return r},o.getPenaltyN2=function(s){const i=s.size;let r=0;for(let a=0;a<i-1;a++)for(let c=0;c<i-1;c++){const d=s.get(a,c)+s.get(a,c+1)+s.get(a+1,c)+s.get(a+1,c+1);(d===4||d===0)&&r++}return r*t.N2},o.getPenaltyN3=function(s){const i=s.size;let r=0,a=0,c=0;for(let d=0;d<i;d++){a=c=0;for(let u=0;u<i;u++)a=a<<1&2047|s.get(d,u),u>=10&&(a===1488||a===93)&&r++,c=c<<1&2047|s.get(u,d),u>=10&&(c===1488||c===93)&&r++}return r*t.N3},o.getPenaltyN4=function(s){let i=0;const r=s.data.length;for(let c=0;c<r;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/r/5)-10)*t.N4};function e(n,s,i){switch(n){case o.Patterns.PATTERN000:return(s+i)%2===0;case o.Patterns.PATTERN001:return s%2===0;case o.Patterns.PATTERN010:return i%3===0;case o.Patterns.PATTERN011:return(s+i)%3===0;case o.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case o.Patterns.PATTERN101:return s*i%2+s*i%3===0;case o.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case o.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}o.applyMask=function(s,i){const r=i.size;for(let a=0;a<r;a++)for(let c=0;c<r;c++)i.isReserved(c,a)||i.xor(c,a,e(s,c,a))},o.getBestMask=function(s,i){const r=Object.keys(o.Patterns).length;let a=0,c=1/0;for(let d=0;d<r;d++){i(d),o.applyMask(d,s);const u=o.getPenaltyN1(s)+o.getPenaltyN2(s)+o.getPenaltyN3(s)+o.getPenaltyN4(s);o.applyMask(d,s),u<c&&(c=u,a=d)}return a}})(Lt);var st={};const D=nt,Z=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],X=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];st.getBlocksCount=function(t,e){switch(e){case D.L:return Z[(t-1)*4+0];case D.M:return Z[(t-1)*4+1];case D.Q:return Z[(t-1)*4+2];case D.H:return Z[(t-1)*4+3];default:return}};st.getTotalCodewordsCount=function(t,e){switch(e){case D.L:return X[(t-1)*4+0];case D.M:return X[(t-1)*4+1];case D.Q:return X[(t-1)*4+2];case D.H:return X[(t-1)*4+3];default:return}};var Rt={},ot={};const q=new Uint8Array(512),tt=new Uint8Array(256);(function(){let t=1;for(let e=0;e<255;e++)q[e]=t,tt[t]=e,t<<=1,t&256&&(t^=285);for(let e=255;e<512;e++)q[e]=q[e-255]})();ot.log=function(t){if(t<1)throw new Error("log("+t+")");return tt[t]};ot.exp=function(t){return q[t]};ot.mul=function(t,e){return t===0||e===0?0:q[tt[t]+tt[e]]};(function(o){const t=ot;o.mul=function(n,s){const i=new Uint8Array(n.length+s.length-1);for(let r=0;r<n.length;r++)for(let a=0;a<s.length;a++)i[r+a]^=t.mul(n[r],s[a]);return i},o.mod=function(n,s){let i=new Uint8Array(n);for(;i.length-s.length>=0;){const r=i[0];for(let c=0;c<s.length;c++)i[c]^=t.mul(s[c],r);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},o.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let i=0;i<n;i++)s=o.mul(s,new Uint8Array([1,t.exp(i)]));return s}})(Rt);const Ut=Rt;function bt(o){this.genPoly=void 0,this.degree=o,this.degree&&this.initialize(this.degree)}bt.prototype.initialize=function(t){this.degree=t,this.genPoly=Ut.generateECPolynomial(this.degree)};bt.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=Ut.mod(e,this.genPoly),s=this.degree-n.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(n,s),i}return n};var ee=bt,kt={},O={},Nt={};Nt.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var L={};const Dt="[0-9]+",ne="[A-Z $%*+\\-./:]+";let j="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";j=j.replace(/u/g,"\\u");const se="(?:(?![A-Z0-9 $%*+\\-./:]|"+j+`)(?:.|[\r
]))+`;L.KANJI=new RegExp(j,"g");L.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");L.BYTE=new RegExp(se,"g");L.NUMERIC=new RegExp(Dt,"g");L.ALPHANUMERIC=new RegExp(ne,"g");const oe=new RegExp("^"+j+"$"),ie=new RegExp("^"+Dt+"$"),re=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");L.testKanji=function(t){return oe.test(t)};L.testNumeric=function(t){return ie.test(t)};L.testAlphanumeric=function(t){return re.test(t)};(function(o){const t=Nt,e=L;o.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},o.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},o.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},o.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},o.MIXED={bit:-1},o.getCharCountIndicator=function(i,r){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(r))throw new Error("Invalid version: "+r);return r>=1&&r<10?i.ccBits[0]:r<27?i.ccBits[1]:i.ccBits[2]},o.getBestModeForData=function(i){return e.testNumeric(i)?o.NUMERIC:e.testAlphanumeric(i)?o.ALPHANUMERIC:e.testKanji(i)?o.KANJI:o.BYTE},o.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},o.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return o.NUMERIC;case"alphanumeric":return o.ALPHANUMERIC;case"kanji":return o.KANJI;case"byte":return o.BYTE;default:throw new Error("Unknown mode: "+s)}}o.from=function(i,r){if(o.isValid(i))return i;try{return n(i)}catch{return r}}})(O);(function(o){const t=v,e=st,n=nt,s=O,i=Nt,r=7973,a=t.getBCHDigit(r);function c(f,h,w){for(let y=1;y<=40;y++)if(h<=o.getCapacity(y,w,f))return y}function d(f,h){return s.getCharCountIndicator(f,h)+4}function u(f,h){let w=0;return f.forEach(function(y){const A=d(y.mode,h);w+=A+y.getBitsLength()}),w}function N(f,h){for(let w=1;w<=40;w++)if(u(f,w)<=o.getCapacity(w,h,s.MIXED))return w}o.from=function(h,w){return i.isValid(h)?parseInt(h,10):w},o.getCapacity=function(h,w,y){if(!i.isValid(h))throw new Error("Invalid QR Code version");typeof y>"u"&&(y=s.BYTE);const A=t.getSymbolTotalCodewords(h),m=e.getTotalCodewordsCount(h,w),b=(A-m)*8;if(y===s.MIXED)return b;const g=b-d(y,h);switch(y){case s.NUMERIC:return Math.floor(g/10*3);case s.ALPHANUMERIC:return Math.floor(g/11*2);case s.KANJI:return Math.floor(g/13);case s.BYTE:default:return Math.floor(g/8)}},o.getBestVersionForData=function(h,w){let y;const A=n.from(w,n.M);if(Array.isArray(h)){if(h.length>1)return N(h,A);if(h.length===0)return 1;y=h[0]}else y=h;return c(y.mode,y.getLength(),A)},o.getEncodedBits=function(h){if(!i.isValid(h)||h<7)throw new Error("Invalid QR Code version");let w=h<<12;for(;t.getBCHDigit(w)-a>=0;)w^=r<<t.getBCHDigit(w)-a;return h<<12|w}})(kt);var Ot={};const ht=v,Ft=1335,ae=21522,Tt=ht.getBCHDigit(Ft);Ot.getEncodedBits=function(t,e){const n=t.bit<<3|e;let s=n<<10;for(;ht.getBCHDigit(s)-Tt>=0;)s^=Ft<<ht.getBCHDigit(s)-Tt;return(n<<10|s)^ae};var Ht={};const ce=O;function H(o){this.mode=ce.NUMERIC,this.data=o.toString()}H.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};H.prototype.getLength=function(){return this.data.length};H.prototype.getBitsLength=function(){return H.getBitsLength(this.data.length)};H.prototype.write=function(t){let e,n,s;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),s=parseInt(n,10),t.put(s,10);const i=this.data.length-e;i>0&&(n=this.data.substr(e),s=parseInt(n,10),t.put(s,i*3+1))};var le=H;const ue=O,at=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function z(o){this.mode=ue.ALPHANUMERIC,this.data=o}z.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};z.prototype.getLength=function(){return this.data.length};z.prototype.getBitsLength=function(){return z.getBitsLength(this.data.length)};z.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=at.indexOf(this.data[e])*45;n+=at.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(at.indexOf(this.data[e]),6)};var de=z;const he=O;function V(o){this.mode=he.BYTE,typeof o=="string"?this.data=new TextEncoder().encode(o):this.data=new Uint8Array(o)}V.getBitsLength=function(t){return t*8};V.prototype.getLength=function(){return this.data.length};V.prototype.getBitsLength=function(){return V.getBitsLength(this.data.length)};V.prototype.write=function(o){for(let t=0,e=this.data.length;t<e;t++)o.put(this.data[t],8)};var fe=V;const pe=O,ge=v;function J(o){this.mode=pe.KANJI,this.data=o}J.getBitsLength=function(t){return t*13};J.prototype.getLength=function(){return this.data.length};J.prototype.getBitsLength=function(){return J.getBitsLength(this.data.length)};J.prototype.write=function(o){let t;for(t=0;t<this.data.length;t++){let e=ge.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),o.put(e,13)}};var me=J,zt={exports:{}};(function(o){var t={single_source_shortest_paths:function(e,n,s){var i={},r={};r[n]=0;var a=t.PriorityQueue.make();a.push(n,0);for(var c,d,u,N,f,h,w,y,A;!a.empty();){c=a.pop(),d=c.value,N=c.cost,f=e[d]||{};for(u in f)f.hasOwnProperty(u)&&(h=f[u],w=N+h,y=r[u],A=typeof r[u]>"u",(A||y>w)&&(r[u]=w,a.push(u,w),i[u]=d))}if(typeof s<"u"&&typeof r[s]>"u"){var m=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(m)}return i},extract_shortest_path_from_predecessor_list:function(e,n){for(var s=[],i=n;i;)s.push(i),e[i],i=e[i];return s.reverse(),s},find_path:function(e,n,s){var i=t.single_source_shortest_paths(e,n,s);return t.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(e){var n=t.PriorityQueue,s={},i;e=e||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=e.sorter||n.default_sorter,s},default_sorter:function(e,n){return e.cost-n.cost},push:function(e,n){var s={value:e,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};o.exports=t})(zt);var we=zt.exports;(function(o){const t=O,e=le,n=de,s=fe,i=me,r=L,a=v,c=we;function d(m){return unescape(encodeURIComponent(m)).length}function u(m,b,g){const p=[];let C;for(;(C=m.exec(g))!==null;)p.push({data:C[0],index:C.index,mode:b,length:C[0].length});return p}function N(m){const b=u(r.NUMERIC,t.NUMERIC,m),g=u(r.ALPHANUMERIC,t.ALPHANUMERIC,m);let p,C;return a.isKanjiModeEnabled()?(p=u(r.BYTE,t.BYTE,m),C=u(r.KANJI,t.KANJI,m)):(p=u(r.BYTE_KANJI,t.BYTE,m),C=[]),b.concat(g,p,C).sort(function(S,B){return S.index-B.index}).map(function(S){return{data:S.data,mode:S.mode,length:S.length}})}function f(m,b){switch(b){case t.NUMERIC:return e.getBitsLength(m);case t.ALPHANUMERIC:return n.getBitsLength(m);case t.KANJI:return i.getBitsLength(m);case t.BYTE:return s.getBitsLength(m)}}function h(m){return m.reduce(function(b,g){const p=b.length-1>=0?b[b.length-1]:null;return p&&p.mode===g.mode?(b[b.length-1].data+=g.data,b):(b.push(g),b)},[])}function w(m){const b=[];for(let g=0;g<m.length;g++){const p=m[g];switch(p.mode){case t.NUMERIC:b.push([p,{data:p.data,mode:t.ALPHANUMERIC,length:p.length},{data:p.data,mode:t.BYTE,length:p.length}]);break;case t.ALPHANUMERIC:b.push([p,{data:p.data,mode:t.BYTE,length:p.length}]);break;case t.KANJI:b.push([p,{data:p.data,mode:t.BYTE,length:d(p.data)}]);break;case t.BYTE:b.push([{data:p.data,mode:t.BYTE,length:d(p.data)}])}}return b}function y(m,b){const g={},p={start:{}};let C=["start"];for(let P=0;P<m.length;P++){const S=m[P],B=[];for(let k=0;k<S.length;k++){const M=S[k],x=""+P+k;B.push(x),g[x]={node:M,lastCount:0},p[x]={};for(let rt=0;rt<C.length;rt++){const R=C[rt];g[R]&&g[R].node.mode===M.mode?(p[R][x]=f(g[R].lastCount+M.length,M.mode)-f(g[R].lastCount,M.mode),g[R].lastCount+=M.length):(g[R]&&(g[R].lastCount=M.length),p[R][x]=f(M.length,M.mode)+4+t.getCharCountIndicator(M.mode,b))}}C=B}for(let P=0;P<C.length;P++)p[C[P]].end=0;return{map:p,table:g}}function A(m,b){let g;const p=t.getBestModeForData(m);if(g=t.from(b,p),g!==t.BYTE&&g.bit<p.bit)throw new Error('"'+m+'" cannot be encoded with mode '+t.toString(g)+`.
 Suggested mode is: `+t.toString(p));switch(g===t.KANJI&&!a.isKanjiModeEnabled()&&(g=t.BYTE),g){case t.NUMERIC:return new e(m);case t.ALPHANUMERIC:return new n(m);case t.KANJI:return new i(m);case t.BYTE:return new s(m)}}o.fromArray=function(b){return b.reduce(function(g,p){return typeof p=="string"?g.push(A(p,null)):p.data&&g.push(A(p.data,p.mode)),g},[])},o.fromString=function(b,g){const p=N(b,a.isKanjiModeEnabled()),C=w(p),P=y(C,g),S=c.find_path(P.map,"start","end"),B=[];for(let k=1;k<S.length-1;k++)B.push(P.table[S[k]].node);return o.fromArray(h(B))},o.rawSplit=function(b){return o.fromArray(N(b,a.isKanjiModeEnabled()))}})(Ht);const it=v,ct=nt,ye=Xt,be=$t,Ne=Bt,Ce=Mt,ft=Lt,pt=st,Ee=ee,et=kt,Pe=Ot,Se=O,lt=Ht;function Ae(o,t){const e=o.size,n=Ce.getPositions(t);for(let s=0;s<n.length;s++){const i=n[s][0],r=n[s][1];for(let a=-1;a<=7;a++)if(!(i+a<=-1||e<=i+a))for(let c=-1;c<=7;c++)r+c<=-1||e<=r+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?o.set(i+a,r+c,!0,!0):o.set(i+a,r+c,!1,!0))}}function Te(o){const t=o.size;for(let e=8;e<t-8;e++){const n=e%2===0;o.set(e,6,n,!0),o.set(6,e,n,!0)}}function Ie(o,t){const e=Ne.getPositions(t);for(let n=0;n<e.length;n++){const s=e[n][0],i=e[n][1];for(let r=-2;r<=2;r++)for(let a=-2;a<=2;a++)r===-2||r===2||a===-2||a===2||r===0&&a===0?o.set(s+r,i+a,!0,!0):o.set(s+r,i+a,!1,!0)}}function _e(o,t){const e=o.size,n=et.getEncodedBits(t);let s,i,r;for(let a=0;a<18;a++)s=Math.floor(a/3),i=a%3+e-8-3,r=(n>>a&1)===1,o.set(s,i,r,!0),o.set(i,s,r,!0)}function ut(o,t,e){const n=o.size,s=Pe.getEncodedBits(t,e);let i,r;for(i=0;i<15;i++)r=(s>>i&1)===1,i<6?o.set(i,8,r,!0):i<8?o.set(i+1,8,r,!0):o.set(n-15+i,8,r,!0),i<8?o.set(8,n-i-1,r,!0):i<9?o.set(8,15-i-1+1,r,!0):o.set(8,15-i-1,r,!0);o.set(n-8,8,1,!0)}function ve(o,t){const e=o.size;let n=-1,s=e-1,i=7,r=0;for(let a=e-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!o.isReserved(s,a-c)){let d=!1;r<t.length&&(d=(t[r]>>>i&1)===1),o.set(s,a-c,d),i--,i===-1&&(r++,i=7)}if(s+=n,s<0||e<=s){s-=n,n=-n;break}}}function Be(o,t,e){const n=new ye;e.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),Se.getCharCountIndicator(c.mode,o)),c.write(n)});const s=it.getSymbolTotalCodewords(o),i=pt.getTotalCodewordsCount(o,t),r=(s-i)*8;for(n.getLengthInBits()+4<=r&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(r-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return Me(n,o,t)}function Me(o,t,e){const n=it.getSymbolTotalCodewords(t),s=pt.getTotalCodewordsCount(t,e),i=n-s,r=pt.getBlocksCount(t,e),a=n%r,c=r-a,d=Math.floor(n/r),u=Math.floor(i/r),N=u+1,f=d-u,h=new Ee(f);let w=0;const y=new Array(r),A=new Array(r);let m=0;const b=new Uint8Array(o.buffer);for(let S=0;S<r;S++){const B=S<c?u:N;y[S]=b.slice(w,w+B),A[S]=h.encode(y[S]),w+=B,m=Math.max(m,B)}const g=new Uint8Array(n);let p=0,C,P;for(C=0;C<m;C++)for(P=0;P<r;P++)C<y[P].length&&(g[p++]=y[P][C]);for(C=0;C<f;C++)for(P=0;P<r;P++)g[p++]=A[P][C];return g}function Le(o,t,e,n){let s;if(Array.isArray(o))s=lt.fromArray(o);else if(typeof o=="string"){let d=t;if(!d){const u=lt.rawSplit(o);d=et.getBestVersionForData(u,e)}s=lt.fromString(o,d||40)}else throw new Error("Invalid data");const i=et.getBestVersionForData(s,e);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const r=Be(t,e,s),a=it.getSymbolSize(t),c=new be(a);return Ae(c,t),Te(c),Ie(c,t),ut(c,e,0),t>=7&&_e(c,t),ve(c,r),isNaN(n)&&(n=ft.getBestMask(c,ut.bind(null,c,e))),ft.applyMask(n,c),ut(c,e,n),{modules:c,version:t,errorCorrectionLevel:e,maskPattern:n,segments:s}}_t.create=function(t,e){if(typeof t>"u"||t==="")throw new Error("No input text");let n=ct.M,s,i;return typeof e<"u"&&(n=ct.from(e.errorCorrectionLevel,ct.M),s=et.from(e.version),i=ft.from(e.maskPattern),e.toSJISFunc&&it.setToSJISFunction(e.toSJISFunc)),Le(t,s,n,i)};var Vt={},Ct={};(function(o){function t(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let n=e.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+e);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}o.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,r=n.scale||4;return{width:i,scale:i?4:r,margin:s,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},o.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},o.getImageWidth=function(n,s){const i=o.getScale(n,s);return Math.floor((n+s.margin*2)*i)},o.qrToImageData=function(n,s,i){const r=s.modules.size,a=s.modules.data,c=o.getScale(r,i),d=Math.floor((r+i.margin*2)*c),u=i.margin*c,N=[i.color.light,i.color.dark];for(let f=0;f<d;f++)for(let h=0;h<d;h++){let w=(f*d+h)*4,y=i.color.light;if(f>=u&&h>=u&&f<d-u&&h<d-u){const A=Math.floor((f-u)/c),m=Math.floor((h-u)/c);y=N[a[A*r+m]?1:0]}n[w++]=y.r,n[w++]=y.g,n[w++]=y.b,n[w]=y.a}}})(Ct);(function(o){const t=Ct;function e(s,i,r){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=r,i.width=r,i.style.height=r+"px",i.style.width=r+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}o.render=function(i,r,a){let c=a,d=r;typeof c>"u"&&(!r||!r.getContext)&&(c=r,r=void 0),r||(d=n()),c=t.getOptions(c);const u=t.getImageWidth(i.modules.size,c),N=d.getContext("2d"),f=N.createImageData(u,u);return t.qrToImageData(f.data,i,c),e(N,d,u),N.putImageData(f,0,0),d},o.renderToDataURL=function(i,r,a){let c=a;typeof c>"u"&&(!r||!r.getContext)&&(c=r,r=void 0),c||(c={});const d=o.render(i,r,c),u=c.type||"image/png",N=c.rendererOpts||{};return d.toDataURL(u,N.quality)}})(Vt);var Jt={};const Re=Ct;function It(o,t){const e=o.a/255,n=t+'="'+o.hex+'"';return e<1?n+" "+t+'-opacity="'+e.toFixed(2).slice(1)+'"':n}function dt(o,t,e){let n=o+t;return typeof e<"u"&&(n+=" "+e),n}function Ue(o,t,e){let n="",s=0,i=!1,r=0;for(let a=0;a<o.length;a++){const c=Math.floor(a%t),d=Math.floor(a/t);!c&&!i&&(i=!0),o[a]?(r++,a>0&&c>0&&o[a-1]||(n+=i?dt("M",c+e,.5+d+e):dt("m",s,0),s=0,i=!1),c+1<t&&o[a+1]||(n+=dt("h",r),r=0)):s++}return n}Jt.render=function(t,e,n){const s=Re.getOptions(e),i=t.modules.size,r=t.modules.data,a=i+s.margin*2,c=s.color.light.a?"<path "+It(s.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",d="<path "+It(s.color.dark,"stroke")+' d="'+Ue(r,i,s.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof n=="function"&&n(null,f),f};const ke=Qt,gt=_t,xt=Vt,De=Jt;function Et(o,t,e,n,s){const i=[].slice.call(arguments,1),r=i.length,a=typeof i[r-1]=="function";if(!a&&!ke())throw new Error("Callback required as last argument");if(a){if(r<2)throw new Error("Too few arguments provided");r===2?(s=e,e=t,t=n=void 0):r===3&&(t.getContext&&typeof s>"u"?(s=n,n=void 0):(s=n,n=e,e=t,t=void 0))}else{if(r<1)throw new Error("Too few arguments provided");return r===1?(e=t,t=n=void 0):r===2&&!t.getContext&&(n=e,e=t,t=void 0),new Promise(function(c,d){try{const u=gt.create(e,n);c(o(u,t,n))}catch(u){d(u)}})}try{const c=gt.create(e,n);s(null,o(c,t,n))}catch(c){s(c)}}G.create=gt.create;G.toCanvas=Et.bind(null,xt.render);G.toDataURL=Et.bind(null,xt.renderToDataURL);G.toString=Et.bind(null,function(o,t,e){return De.render(o,e)});function Oe({onStartSession:o,onJoinSession:t}){const e=l("input",{type:"text",className:"input",placeholder:"ABC123",maxlength:"6"}),n=l("input",{type:"text",className:"input",placeholder:"Dein Name",style:{marginTop:"0.5rem"}}),s=()=>{const i=e.value.trim().toUpperCase(),r=n.value.trim()||"Anonym";i.length>=4&&t(i,r)};return l("div",{className:"home-screen"},l("div",{className:"logo"},"ðŸ“Š"),l("h1",{},"Mentimeter Pro"),l("p",{className:"tagline"},"Live Polls & Feedback fÃ¼r Workshops"),l("div",{className:"home-actions"},l("button",{className:"btn btn-primary btn-large btn-full",onClick:o},"ðŸŽ¤ PrÃ¤sentation starten"),l("div",{className:"divider"},"oder"),l("div",{},e,n,l("button",{className:"btn btn-secondary btn-full",style:{marginTop:"0.5rem"},onClick:s},"ðŸš€ Session beitreten"))))}function Fe({session:o,participantCount:t,onCreatePoll:e}){const n=l("div",{className:"qr-container",id:"qr-code"}),s=`${window.location.origin}${window.location.pathname}?join=${o.code}`;return G.toCanvas(n,s,{width:200,margin:0,color:{dark:"#1e293b",light:"#ffffff"}}).catch(console.error),l("div",{className:"container text-center",style:{paddingTop:"2rem"}},l("h2",{className:"mb-2"},"Session bereit!"),l("div",{className:"session-code mb-3"},o.code),n,l("p",{className:"text-muted mt-2 mb-3"},"Scanne den QR-Code oder gib den Code ein"),l("div",{className:"participant-count mb-3",style:{display:"inline-flex"}},l("span",{className:"participant-dot"}),l("span",{},`${t} Teilnehmer`)),l("div",{className:"card mt-3"},l("h3",{className:"mb-2"},"Neue Umfrage erstellen"),l("div",{className:"flex flex-col gap-1"},l("button",{className:"btn btn-secondary btn-full",onClick:()=>e("multiple-choice")},"ðŸ“Š Multiple Choice"),l("button",{className:"btn btn-secondary btn-full",onClick:()=>e("word-cloud")},"â˜ï¸ Word Cloud"),l("button",{className:"btn btn-secondary btn-full",onClick:()=>e("open-ended")},"ðŸ’¬ Offene Frage"))))}function He({type:o,onSave:t,onCancel:e}){const n=l("input",{type:"text",className:"input",placeholder:"Deine Frage..."});let s=null,i=["",""];const r=u=>{const N=l("input",{type:"text",className:"input",placeholder:`Option ${u+1}`,value:i[u]||""});return N.addEventListener("input",()=>{i[u]=N.value}),l("div",{className:"option-row"},N,u>1?l("button",{className:"btn btn-icon btn-secondary",onClick:()=>{i.splice(u,1),a()}},"âœ•"):null)},a=()=>{s&&(s.innerHTML="",i.forEach((u,N)=>{s.appendChild(r(N))}))};o==="multiple-choice"&&(s=l("div",{className:"option-list"}),a());const c=o==="multiple-choice"?l("label",{className:"flex items-center gap-1",style:{cursor:"pointer"}},l("input",{type:"checkbox",id:"allow-multiple"}),"Mehrere Antworten erlauben"):null,d=()=>{const u=n.value.trim();if(!u)return;const N={question:u};if(o==="multiple-choice"){if(N.options=i.filter(h=>h.trim()),N.options.length<2){alert("Mindestens 2 Optionen benÃ¶tigt");return}const f=document.getElementById("allow-multiple");N.allowMultiple=(f==null?void 0:f.checked)||!1}t(o,N)};return l("div",{className:"container"},l("div",{className:"card"},l("h2",{className:"mb-2"},o==="multiple-choice"?"ðŸ“Š Multiple Choice":o==="word-cloud"?"â˜ï¸ Word Cloud":"ðŸ’¬ Offene Frage"),l("div",{className:"poll-form"},l("div",{},l("label",{className:"text-muted mb-1",style:{display:"block"}},"Frage"),n),s?l("div",{},l("label",{className:"text-muted mb-1",style:{display:"block"}},"AntwortmÃ¶glichkeiten"),s,l("button",{className:"btn btn-secondary mt-2",onClick:()=>{i.push(""),a()}},"+ Option hinzufÃ¼gen")):null,c,l("div",{className:"flex gap-1 mt-2"},l("button",{className:"btn btn-secondary",onClick:e},"Abbrechen"),l("button",{className:"btn btn-primary",onClick:d},"Umfrage starten")))))}function ze({poll:o,type:t,participantCount:e}){let n;if(t==="multiple-choice"){const s=o.getResults(),i=o.getPercentages();o.getTotalVotes(),n=l("div",{className:"flex flex-col gap-1"},...o.options.map(r=>{const a=i[r]||0,c=s[r]||0;return l("div",{className:"poll-option"},l("div",{className:"poll-option-bar",style:{width:`${a}%`}}),l("div",{className:"poll-option-content"},l("span",{className:"poll-option-text"},r),l("span",{className:"poll-option-percent"},`${c} (${a}%)`)))}))}else if(t==="word-cloud"){const s=o.getWordsWithSizes(20,56);n=l("div",{className:"word-cloud"},s.length===0?l("p",{className:"text-muted"},"Warte auf Antworten..."):s.map(i=>l("span",{className:"word-cloud-item",style:{fontSize:`${i.size}px`}},i.text)))}else if(t==="open-ended"){const s=o.getResponses();n=l("div",{className:"response-list"},s.length===0?l("p",{className:"text-muted text-center"},"Warte auf Antworten..."):s.map(i=>l("div",{className:"response-item"},i.text)))}return l("div",{className:"container-wide",style:{padding:"2rem"}},l("div",{className:"flex justify-between items-center mb-3"},l("div",{className:"participant-count"},l("span",{className:"participant-dot"}),l("span",{},`${e} Teilnehmer`))),l("div",{className:"card"},l("h2",{className:"mb-3"},o.question),n))}function Ve({sessionCode:o}){return l("div",{className:"container text-center",style:{paddingTop:"4rem"}},l("div",{className:"session-code session-code-small mb-3"},o),l("h2",{className:"mb-2"},"Warte auf den Presenter..."),l("div",{className:"waiting-animation",style:{justifyContent:"center"}},l("div",{className:"waiting-dot"}),l("div",{className:"waiting-dot"}),l("div",{className:"waiting-dot"})))}function Je({poll:o,type:t,onSubmit:e}){if(t==="multiple-choice"){const n=new Set,s=o.allowMultiple,i=o.options.map(r=>{const a=l("div",{className:"poll-option",onClick:()=>{s?n.has(r)?(n.delete(r),a.classList.remove("selected")):(n.add(r),a.classList.add("selected")):(i.forEach(c=>c.classList.remove("selected")),n.clear(),n.add(r),a.classList.add("selected"))}},l("div",{className:"poll-option-content"},l("span",{className:"poll-option-text"},r)));return a});return l("div",{className:"container"},l("div",{className:"card"},l("h2",{className:"mb-3"},o.question),l("div",{className:"flex flex-col gap-1"},...i),l("button",{className:"btn btn-primary btn-full mt-3",onClick:()=>{n.size>0&&e(Array.from(n))}},"Abstimmen")))}if(t==="word-cloud"){const n=l("input",{type:"text",className:"input",placeholder:"WÃ¶rter mit Komma trennen (z.B. kreativ, spannend, lehrreich)"});return l("div",{className:"container"},l("div",{className:"card"},l("h2",{className:"mb-3"},o.question),n,l("button",{className:"btn btn-primary btn-full mt-2",onClick:()=>{const s=n.value.split(",").map(i=>i.trim()).filter(Boolean);s.length>0&&(e(s),n.value="",n.disabled=!0)}},"Absenden")))}if(t==="open-ended"){const n=l("textarea",{className:"textarea",placeholder:"Deine Antwort..."});return l("div",{className:"container"},l("div",{className:"card"},l("h2",{className:"mb-3"},o.question),n,l("button",{className:"btn btn-primary btn-full mt-2",onClick:()=>{const s=n.value.trim();s&&(e(s),n.value="")}},"Absenden")))}}function xe({message:o,onRetry:t}){return l("div",{className:"container text-center",style:{paddingTop:"4rem"}},l("div",{style:{fontSize:"4rem",marginBottom:"1rem"}},"ðŸ˜•"),l("h2",{className:"mb-2"},"Etwas ist schiefgelaufen"),l("p",{className:"text-muted mb-3"},o),l("button",{className:"btn btn-primary",onClick:t},"Erneut versuchen"))}const E=new jt;let I="home",mt=0,U=null,qt=null;function T(){var t,e;const o=Gt("#app");switch(I){case"home":F(o,Oe({onStartSession:qe,onJoinSession:We}));break;case"waiting-room":F(o,Fe({session:E.session,participantCount:mt,onCreatePoll:Ke}));break;case"creating-poll":F(o,He({type:qt,onSave:Ye,onCancel:()=>{I="waiting-room",T()}}));break;case"presenter-poll":const n=E.getPoll(U),s=E.session.polls.find(a=>a.id===U);n&&s&&F(o,ze({poll:n,type:s.type,participantCount:mt}));break;case"participant-waiting":F(o,Ve({sessionCode:((t=E.session)==null?void 0:t.code)||"..."}));break;case"participant-poll":const i=E.getPoll(U),r=(e=E.session)==null?void 0:e.polls.find(a=>a.id===U);i&&r&&F(o,Je({poll:i,type:r.type,onSubmit:a=>je(U,r.type,a)}));break;case"error":F(o,xe({message:"Verbindung fehlgeschlagen",onRetry:()=>{I="home",T()}}));break}}async function qe(){try{await E.startSession(),I="waiting-room",T()}catch(o){console.error("Failed to start session:",o),I="error",T()}}async function We(o,t){try{await E.joinSession(o,t),I="participant-waiting",T()}catch(e){console.error("Failed to join session:",e),I="error",T()}}function Ke(o){qt=o,I="creating-poll",T()}function Ye(o,t){const e=E.createPoll(o,t);U=e.id,E.activatePoll(e.id),I="presenter-poll",T()}function je(o,t,e){t==="multiple-choice"?E.submitVote(o,e):t==="word-cloud"?E.submitWords(o,e):t==="open-ended"&&E.submitText(o,e),I="participant-waiting",T()}E.on("participants-update",o=>{mt=o.length,T()});E.on("poll-update",({pollId:o})=>{o===U&&E.mode==="presenter"&&T()});E.on("session-sync",o=>{E.mode==="participant"&&(o.activePollId?(U=o.activePollId,I="participant-poll"):I="participant-waiting",T())});E.on("active-poll-change",o=>{U=o,E.mode==="participant"&&o&&(I="participant-poll",T())});E.on("status-change",o=>{console.log("Connection status:",o),o==="disconnected"&&E.mode});E.on("error",o=>{console.error("App error:",o),I="error",T()});function Ge(){const t=new URLSearchParams(window.location.search).get("join");t&&setTimeout(()=>{const e=document.querySelector('.join-form input, input[placeholder="ABC123"]');e&&(e.value=t.toUpperCase())},100)}document.addEventListener("DOMContentLoaded",()=>{T(),Ge()});window.addEventListener("beforeunload",()=>{E.destroy()});window.mentimeterApp=E;
//# sourceMappingURL=index-QBwDXret.js.map
